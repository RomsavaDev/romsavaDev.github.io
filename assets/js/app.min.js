function ibg(){$.each($(".ibg"),function(a,e){0<$(this).find("img").length&&$(this).css("background-image",'url("'+$(this).find("img").attr("src")+'")')})}function map(a){google.maps.Map.prototype.setCenterWithOffset=function(t,r,s){var o=this,a=new google.maps.OverlayView;a.onAdd=function(){var a=this.getProjection(),e=a.fromLatLngToContainerPixel(t);e.x=e.x+r,e.y=e.y+s,o.panTo(a.fromContainerPixelToLatLng(e))},a.draw=function(){},a.setMap(this)};for(var e=new Array,t=(new google.maps.InfoWindow({}),[[new google.maps.LatLng(53.819055,27.8813694)]]),r={zoom:10,panControl:!1,mapTypeControl:!1,center:t[0][0],scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},s=new google.maps.Map(document.getElementById("map"),r),o=(new google.maps.Size(18,20),new google.maps.Point(9,10),0);o<t.length;o++){var i=new google.maps.Marker({position:t[o][0],map:s});e.push(i)}}function forms(){$("input,textarea").focus(function(){$(this).val()==$(this).attr("data-value")&&($(this).addClass("focus"),$(this).parent().addClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","password"),$(this).val("")),removeError($(this))}),$("input[data-value], textarea[data-value]").each(function(){""!=this.value&&this.value!=$(this).attr("data-value")||($(this).hasClass("l")&&0==$(this).parent().find(".form__label").length?$(this).parent().append('<div class="form__label">'+$(this).attr("data-value")+"</div>"):this.value=$(this).attr("data-value")),this.value!=$(this).attr("data-value")&&""!=this.value&&($(this).addClass("focus"),$(this).parent().addClass("focus"),$(this).hasClass("l")&&0==$(this).parent().find(".form__label").length&&$(this).parent().append('<div class="form__label">'+$(this).attr("data-value")+"</div>")),$(this).click(function(){this.value==$(this).attr("data-value")&&("pass"==$(this).attr("data-type")&&$(this).attr("type","password"),this.value="")}),$(this).blur(function(){""==this.value&&($(this).hasClass("l")||(this.value=$(this).attr("data-value")),$(this).removeClass("focus"),$(this).parent().removeClass("focus"),"pass"==$(this).attr("data-type")&&$(this).attr("type","text")),$(this).hasClass("vn")&&formValidate($(this))})}),$(".form-input__viewpass").click(function(a){$(this).hasClass("active")?$(this).parent().find("input").attr("type","password"):$(this).parent().find("input").attr("type","text"),$(this).toggleClass("active")})}function formValidate(a){var e=0,t=a.parents("form");if("email"==a.attr("name")||a.hasClass("email")){if(a.val()!=a.attr("data-value")){var r=a.val().replace(" ","");a.val(r)}/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(a.val())&&a.val()!=a.attr("data-value")?removeError(a):(e++,addError(a))}else""==a.val()||a.val()==a.attr("data-value")?(e++,addError(a)):removeError(a);return"checkbox"==a.attr("type")&&(1==a.prop("checked")?a.removeClass("err").parent().removeClass("err"):(e++,a.addClass("err").parent().addClass("err"))),a.hasClass("name")&&(/^[А-Яа-яa-zA-Z-]+( [А-Яа-яa-zA-Z-]+)$/.test(a.val())||(e++,addError(a))),a.hasClass("pass-2")&&(t.find(".pass-1").val()!=t.find(".pass-2").val()?addError:removeError)(a),e}function formLoad(){$(".popup").hide(),$(".popup-message-body").hide(),$(".popup-message .popup-body").append('<div class="popup-loading"><div class="popup-loading__title">Идет загрузка...</div><div class="popup-loading__icon"></div></div>'),$(".popup-message").addClass("active").fadeIn(300)}function showMessageByClass(a){$(".popup").hide(),popupOpen("message."+a,"")}function showMessage(a){$(".popup-loading").remove(),$(".popup-message-body").show().html(a)}function clearForm(a){$.each(a.find(".input"),function(a,e){$(this).removeClass("focus").val($(this).data("value")),$(this).parent().removeClass("focus"),$(this).hasClass("phone")&&maskclear($(this))})}function addError(a){if(a.addClass("err"),a.parent().addClass("err"),a.parent().find(".form__error").remove(),a.hasClass("email")){var e="";null!=(e=(""==a.val()||(a.val(),a.attr("data-value")),a.data("error")))&&a.parent().append('<div class="form__error">'+e+"</div>")}else null!=a.data("error")&&0==a.parent().find(".form__error").length&&a.parent().append('<div class="form__error">'+a.data("error")+"</div>");0<a.parents(".select-block").length&&(a.parents(".select-block").parent().addClass("err"),a.parents(".select-block").find(".select").addClass("err"))}function addErrorByName(a,e,t){var r=a.find('[name="'+e+'"]');r.attr("data-error",t),addError(r)}function addFormError(a,e){a.find(".form__generalerror").show().html(e)}function removeFormError(a){a.find(".form__generalerror").hide().html("")}function removeError(a){a.removeClass("err"),a.parent().removeClass("err"),a.parent().find(".form__error").remove(),0<a.parents(".select-block").length&&(a.parents(".select-block").parent().removeClass("err"),a.parents(".select-block").find(".select").removeClass("err").removeClass("active"))}function removeFormErrors(a){a.find(".err").removeClass("err"),a.find(".form__error").remove()}$(".wrapper").addClass("loaded"),$(".icon-menu").click(function(a){$(this).toggleClass("active"),$(".menu__body").toggleClass("active"),$("body").toggleClass("lock")}),ibg(),0<$("#map").length&&map(),forms(),$("form button[type=submit]").click(function(){var t=0,a=$(this).parents("form"),e=a.data("ms");return $.each(a.find(".req"),function(a,e){t+=formValidate($(this))}),0==t&&(removeFormError(a),null!=e&&""!=e?(showMessageByClass(e),!1):void 0)});